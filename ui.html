<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
      Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
  }

  button {
    border: none;
    margin: 0;
    padding: 0;
    width: auto;
    overflow: visible;
    background: transparent;
    /* inherit font & color from ancestor */
    color: inherit;
    font: inherit;
    /* Normalize `line-height`. Cannot be changed from `normal` in Firefox 4+. */
    line-height: normal;
    /* Corrects font smoothing for webkit */
    -webkit-font-smoothing: inherit;
    -moz-osx-font-smoothing: inherit;
    /* Corrects inability to style clickable `input` types in iOS */
    -webkit-appearance: none;
  }
  /* Remove excess padding and border in Firefox 4+ */
  button::-moz-focus-inner {
    border: 0;
    padding: 0;
  }

  button {
    display: grid;
    place-items: center;
    padding-left: 1rem;
    padding-right: 1rem;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    width: 100%;
    font-size: 12px;
  }

  div {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding-top: 0.25rem;
  }

  div.vertical {
    display: block;
  }

  p {
    font-size: smaller;
    color: darkslategray;
  }

  span.small {
    font-size: smaller;
    color: darkslategray;
    margin-bottom: 0.25rem;
  }

  input {
    width: 100%;
    height: 40px;
    border-radius: 8px;
    padding: 8px;
    background-color: white;
    color: #575757;
    font-weight: 500;
    box-shadow: none;
    outline: none;
    border: 2px solid #d4d6dd;
    margin-right: 0.25rem;
  }
  input:active {
    border: 2px solid #17a0fb;
  }
  input:focus {
    border: 2px solid #17a0fb;
  }
  select {
    width: 100%;
    height: 40px;
    border-radius: 8px;
    padding: 8px;
    background-color: white;
    color: #575757;
    font-weight: 500;
    box-shadow: none;
    outline: none;
    border: 2px solid #d4d6dd;
  }
  select:first-of-type {
    margin-right: 0.25rem;
  }
  select:active {
    border: 2px solid #17a0fb;
  }
  select:focus {
    border: 2px solid #17a0fb;
  }
  .primary {
    margin-right: 0.25rem;
    background-color: #17a0fb;
    color: white;
    height: 40px;
    font-weight: 600;
    border-radius: 8px;
    box-shadow: none;
    outline: none;
    border: none;
    transition: all 0.1s ease-in-out;
  }
  .secondary {
    /* margin-right: 0.25rem; */
    background-color: rgb(238, 237, 237);
    color: rgb(87, 87, 87);
    height: 40px;
    font-weight: 500;
    border-radius: 8px;
    box-shadow: none;
    outline: none;
    transition: all 0.1s ease-in-out;
  }
  .textStyle {
    background: none;
    color: #17a0fb;
    width: 40px;
    font-weight: 600;
    font-size: small;
  }
  .primary:last-of-type {
    margin-right: 0;
  }
  .primary:active {
    background-color: #0985d8;
  }
  .primary:focus {
    background-color: #0985d8;
  }
  .secondary:active {
    background-color: lightgray;
  }
  .primary:hover {
    background-color: #0985d8;
    transition: all 0.1s ease-in-out;
    cursor: pointer;
  }
  .secondary:hover {
    background-color: lightgray;
    transition: all 0.1s ease-in-out;
    cursor: pointer;
  }
  .secondary:focus {
    background-color: lightgray;
  }
  .textStyle:active {
    color: #0985d8;
  }
  .textStyle:hover {
    color: #0985d8;
    transition: all 0.1s ease-in-out;
    cursor: pointer;
  }
  .textStyle:focus {
    color: #0985d8;
    border-bottom: 1px solid #0985d8;
  }
  .xs {
    font-size: x-small;
    margin-top: 5px;
    color: darkslategray;
  }
  .sm {
    font-size: small;
    padding-bottom: 0;
    margin-bottom: 10px;
    color: darkslategray;
  }
  .h-6 {
    height: 1rem;
  }
  .w-6 {
    height: 1rem;
  }
  .icon {
    width: 100px;
  }
  .justify-end {
    justify-content: space-between;
  }
  .mb-0 {
    margin-bottom: 0;
  }
  .mr-1 {
    margin-right: 0.25rem;
  }
  .mt-1 {
    margin-top: 0.25rem;
  }

  /* The switch - the box around the slider */
  .switch {
    position: relative;
    display: inline-block;
    width: 40px;
    height: 24px;
  }

  /* Hide default HTML checkbox */
  .switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }

  /* The slider */
  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #d4d6dd;
    -webkit-transition: 0.4s;
    transition: 0.4s;
  }

  .slider:before {
    position: absolute;
    content: "";
    height: 16px;
    width: 16px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    -webkit-transition: 0.4s;
    transition: 0.4s;
  }

  input:checked + .slider {
    background-color: #17a0fb;
  }

  input:focus + .slider {
    box-shadow: 0 0 0 2px #17a0fb;
  }

  input:checked + .slider:before {
    -webkit-transform: translateX(16px);
    -ms-transform: translateX(16px);
    transform: translateX(16px);
  }

  /* Rounded sliders */
  .slider.round {
    border-radius: 34px;
  }

  .slider.round:before {
    border-radius: 50%;
  }
</style>

<div class="justify-end mb-0">
  <p>Close plugin on completion</p>
  <label class="switch">
    <input type="checkbox" id="checkbox" />
    <span class="slider round"></span>
  </label>
</div>
<h5 style="margin-bottom: 0; margin-top: 0">Set constraints</h5>
<div>
  <div class="vertical mr-1">
    <div style="justify-content: flex-start">
      <svg
        width="16"
        height="16"
        viewBox="0 0 32 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        style="margin-bottom: 0.25rem; margin-right: 0.5rem"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M3.98 10C4.2451 10 4.46 10.2239 4.46 10.5V15.5H26.54V10.5C26.54 10.2239 26.7549 10 27.02 10C27.2851 10 27.5 10.2239 27.5 10.5V21.5C27.5 21.7761 27.2851 22 27.02 22C26.7549 22 26.54 21.7761 26.54 21.5V16.5H4.46V21.5C4.46 21.7761 4.2451 22 3.98 22C3.7149 22 3.5 21.7761 3.5 21.5V10.5C3.5 10.2239 3.7149 10 3.98 10Z"
          fill="#404B6A"
        />
      </svg>
      <span class="small">Horizontal</span>
    </div>
    <select id="horizontalConstraint" onchange="setHorizontalConstraint()">
      <option value="MIN">Left</option>
      <option value="MAX">Right</option>
      <option value="CENTER">Center</option>
      <option value="STRETCH">Left and Right</option>
      <option value="SCALE">Scale</option>
    </select>
  </div>
  <div class="vertical">
    <div style="justify-content: flex-start">
      <svg
        width="16"
        height="16"
        viewBox="0 0 32 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        style="margin-bottom: 0.25rem"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M10 4.48C10 4.2149 10.2239 4 10.5 4L21.5 4C21.7761 4 22 4.2149 22 4.48C22 4.7451 21.7761 4.96 21.5 4.96L16.5 4.96L16.5 27.04H21.5C21.7761 27.04 22 27.2549 22 27.52C22 27.7851 21.7761 28 21.5 28H10.5C10.2239 28 10 27.7851 10 27.52C10 27.2549 10.2239 27.04 10.5 27.04H15.5L15.5 4.96L10.5 4.96C10.2239 4.96 10 4.7451 10 4.48Z"
          fill="#404B6A"
        />
      </svg>
      <span class="small">Vertical</span>
    </div>
    <select id="verticalConstraint" onchange="setVerticalConstraint()">
      <option value="MIN">Top</option>
      <option value="MAX">Bottom</option>
      <option value="CENTER">Center</option>
      <option value="STRETCH">Top and Bottom</option>
      <option value="SCALE">Scale</option>
    </select>
  </div>
</div>
<button class="secondary mt-1" onclick="sendParentConstraints()">
  Set constraints
</button>
<h5 style="margin-bottom: 0">Scale</h5>
<div>
  <input
    name="scalePercent"
    type="text"
    id="scaleAmount"
    value=""
    placeholder="Scale (%)"
    onchange="setValues()"
  />
  <button id="scaleByPercent" class="primary icon">
    <span
      ><svg width="24" height="24" fill="none" viewBox="0 0 24 24">
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="1.5"
          d="M17.25 6.75L6.75 17.25"
        ></path>
        <circle
          cx="16"
          cy="16"
          r="1.25"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="1.5"
        ></circle>
        <circle
          cx="8"
          cy="8"
          r="1.25"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="1.5"
        ></circle>
      </svg>
    </span>
  </button>
</div>

<div>
  <input
    type="text"
    name="scaleWidth"
    id="scaleWidth"
    value=""
    placeholder="Width (px)"
    onchange="setWidthValues()"
  />
  <button id="scaleByWidth" class="secondary icon">
    <span
      ><svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M6.82986 12.8813C6.82986 11.5375 7.91912 10.4482 9.26287 10.4482H14.7371C16.0809 10.4482 17.1701 11.5375 17.1701 12.8813V18.3555C17.1701 19.6993 16.0809 20.7885 14.7371 20.7885H9.26287C7.91912 20.7885 6.82986 19.6993 6.82986 18.3555V12.8813Z"
          stroke="black"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M7.89429 6.25269L6.37366 4.73206L7.89429 3.21143"
          stroke="black"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M16.1057 6.25269L17.6263 4.73206L16.1057 3.21143"
          stroke="black"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M17.3222 4.73206H7.59018"
          stroke="black"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </span>
  </button>
</div>
<div>
  <input
    type="text"
    name="scaleHeight"
    id="scaleHeight"
    value=""
    placeholder="Height (px)"
    onchange="setHeightValues()"
  />
  <button id="scaleByHeight" class="secondary icon">
    <span
      ><svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M4.09506 7.75L5.34506 6.25L6.59506 7.75"
          stroke="black"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M4.09506 16.25L5.34506 17.75L6.59506 16.25"
          stroke="black"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M5.34506 17V7"
          stroke="black"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M9.56467 9.26284C9.56467 7.91909 10.6539 6.82983 11.9977 6.82983H17.4719C18.8157 6.82983 19.905 7.91909 19.905 9.26284V14.7371C19.905 16.0809 18.8157 17.1701 17.4719 17.1701H11.9977C10.6539 17.1701 9.56467 16.0809 9.56467 14.7371V9.26284Z"
          stroke="black"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </span>
  </button>
</div>
<h5 style="margin-bottom: 0">Min/Max</h5>
<div>
  <button class="secondary mt-1 mr-1" id="scale-max-width-value">
    Scale to Max W
  </button>
  <button class="secondary mt-1" id="scale-min-width-value">
    Scale to Min W
  </button>
</div>
<div>
  <button class="secondary mt-1 mr-1" id="scale-max-height-value">
    Scale to Max H
  </button>
  <button class="secondary mt-1" id="scale-min-height-value">
    Scale to Min H
  </button>
</div>

<script>
  /* Variables */

  const scaleTextBox = document.getElementById("scaleAmount");
  let scaleAmount = Number(scaleTextBox.value ?? 0);

  const scaleWidthTextBox = document.getElementById("scaleWidth");
  let scaleWidthAmount = Number(scaleWidthTextBox.value ?? 0);

  const scaleHeightTextBox = document.getElementById("scaleHeight");
  let scaleHeightAmount = Number(scaleHeightTextBox.value ?? 0);

  const horizontalConstraints = document.getElementById("horizontalConstraint");
  let horizontalConstraint = horizontalConstraints.value;

  const verticalConstraints = document.getElementById("verticalConstraint");
  let verticalConstraint = verticalConstraints.value;

  /* Functions */

  function setValues() {
    scaleAmount = Number(scaleTextBox.value ?? 0);
    return;
  }

  function setWidthValues() {
    scaleWidthAmount = Number(scaleWidthTextBox.value ?? 0);
    return;
  }

  function setHeightValues() {
    scaleHeightAmount = Number(scaleHeightTextBox.value ?? 0);
    return;
  }

  function setHorizontalConstraint() {
    horizontalConstraint = horizontalConstraints.value;
    return;
  }

  function setVerticalConstraint() {
    verticalConstraint = verticalConstraints.value;
    return;
  }

  function sendParentConstraints() {
    console.log(horizontalConstraint, verticalConstraint, "from UI");
    parent.postMessage(
      {
        pluginMessage: {
          type: "set-constraints",
          horizontalConstraint,
          verticalConstraint,
        },
      },
      "*"
    );
  }

  document.getElementById("horizontalConstraint").onclick = () => {
    horizontalConstraint =
      horizontalConstraints.options[horizontalConstraints.selectedIndex].value;
    setHorizontalConstraint();
    parent.postMessage(
      {
        pluginMessage: {
          horizontalConstraint,
        },
      },
      "*"
    );
  };

  document.getElementById("verticalConstraint").onclick = () => {
    verticalConstraint =
      verticalConstraints.options[verticalConstraints.selectedIndex].value;
    setVerticalConstraint();
    parent.postMessage(
      {
        pluginMessage: {
          verticalConstraint,
        },
      },
      "*"
    );
  };

  document.getElementById("scale-max-width-value").onclick = () => {
    parent.postMessage(
      {
        pluginMessage: {
          type: "scale-max-width-value",
          checkboxOn,
        },
      },
      "*"
    );
  };

  document.getElementById("scale-min-width-value").onclick = () => {
    parent.postMessage(
      {
        pluginMessage: {
          type: "scale-min-width-value",
          checkboxOn,
        },
      },
      "*"
    );
  };

  document.getElementById("scale-max-height-value").onclick = () => {
    parent.postMessage(
      {
        pluginMessage: {
          type: "scale-max-height-value",
          checkboxOn,
        },
      },
      "*"
    );
  };

  document.getElementById("scale-min-height-value").onclick = () => {
    parent.postMessage(
      {
        pluginMessage: {
          type: "scale-min-height-value",
          checkboxOn,
        },
      },
      "*"
    );
  };

  const checkbox = document.getElementById("checkbox");
  let checkboxOn = checkbox.hasAttribute("checked");
  checkbox.onclick = () => {
    checkbox.toggleAttribute("checked");
    checkboxOn = checkbox.hasAttribute("checked");
    console.log(checkboxOn);
    return;
  };

  document.getElementById("scaleByPercent").onclick = () => {
    parent.postMessage(
      {
        pluginMessage: {
          type: "scale-value",
          scaleAmount,
          horizontalConstraint,
          verticalConstraint,
          checkboxOn,
        },
      },
      "*"
    );
  };

  document
    .querySelector('input[name="scalePercent"]')
    .addEventListener("keyup", function (e) {
      if (e.key === "Enter") {
        parent.postMessage(
          {
            pluginMessage: {
              type: "scale-value",
              scaleAmount,
              horizontalConstraint,
              verticalConstraint,
              checkboxOn,
            },
          },
          "*"
        );
      }
    });

  document.getElementById("scaleByWidth").onclick = () => {
    parent.postMessage(
      {
        pluginMessage: {
          type: "scale-width-value",
          scaleWidthAmount,
          horizontalConstraint,
          verticalConstraint,
          checkboxOn,
        },
      },
      "*"
    );
  };

  document
    .querySelector('input[name="scaleWidth"]')
    .addEventListener("keyup", function (e) {
      if (e.key === "Enter") {
        parent.postMessage(
          {
            pluginMessage: {
              type: "scale-width-value",
              scaleWidthAmount,
              horizontalConstraint,
              verticalConstraint,
              checkboxOn,
            },
          },
          "*"
        );
      }
    });

  document.getElementById("scaleByHeight").onclick = () => {
    parent.postMessage(
      {
        pluginMessage: {
          type: "scale-height-value",
          scaleHeightAmount,
          horizontalConstraint,
          verticalConstraint,
          checkboxOn,
        },
      },
      "*"
    );
  };

  document
    .querySelector('input[name="scaleHeight"]')
    .addEventListener("keyup", function (e) {
      if (e.key === "Enter") {
        parent.postMessage(
          {
            pluginMessage: {
              type: "scale-height-value",
              scaleHeightAmount,
              horizontalConstraint,
              verticalConstraint,
              checkboxOn,
            },
          },
          "*"
        );
      }
    });
</script>
